<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Postgresql on Dhruv's Blog</title><link>https://dhruv.ing/tags/postgresql/</link><description>Recent content in Postgresql on Dhruv's Blog</description><generator>Hugo</generator><language>en</language><lastBuildDate>Sat, 24 Jun 2023 11:30:00 +0400</lastBuildDate><atom:link href="https://dhruv.ing/tags/postgresql/index.xml" rel="self" type="application/rss+xml"/><item><title>Installing Postgresql on Ubuntu</title><link>https://dhruv.ing/posts/postgresql/postgresql/</link><pubDate>Sat, 24 Jun 2023 11:30:00 +0400</pubDate><guid>https://dhruv.ing/posts/postgresql/postgresql/</guid><description>&lt;h1 id="installing-postgres">Installing Postgres&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt search postgres
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install postgresql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install postgresql postgresql-contrib
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl start postgresql.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -i -u postgres
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -u postgres createuser --interactive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -u upskillr psql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -u postgres createdb upskillr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -u upskillr psql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo adduser upskillr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -u upskillr psql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="double-and-single-quotes-in-pgsql">Double and single Quotes in (PG)SQL&lt;/h1>
&lt;p>Double quotes are for names of tables or fields. Sometimes You can omit them. The single quotes are for string constants. This is the SQL standard. In the verbose form, your query looks like this:&lt;/p></description></item><item><title>Some Postgresql Examples</title><link>https://dhruv.ing/posts/postgresql/examples/</link><pubDate>Sat, 24 Jun 2023 11:30:00 +0400</pubDate><guid>https://dhruv.ing/posts/postgresql/examples/</guid><description>&lt;h2 id="jsonb-to-record">jsonb to record&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> fla.offer_id, ans_data.&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> fla, jsonb_to_record(answer_data) &lt;span style="color:#66d9ef">as&lt;/span> ans_data(&lt;span style="color:#e6db74">&amp;#34;AE46&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE3&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE16&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE45&amp;#34;&lt;/span> date,&lt;span style="color:#e6db74">&amp;#34;AE47&amp;#34;&lt;/span> date,&lt;span style="color:#e6db74">&amp;#34;AE55&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE60&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE61&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE73&amp;#34;&lt;/span> date,&lt;span style="color:#e6db74">&amp;#34;AE74&amp;#34;&lt;/span> date,&lt;span style="color:#e6db74">&amp;#34;AE62&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE27&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE42&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE58&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE25&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE54&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE44&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE17&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE53&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE59&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE19&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE56&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE21&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE57&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE33&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE32&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE41&amp;#34;&lt;/span> date,&lt;span style="color:#e6db74">&amp;#34;AE31&amp;#34;&lt;/span> date,&lt;span style="color:#e6db74">&amp;#34;AE65&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE66&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE67&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE72&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE52&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE38&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE69&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE70&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE68&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE71&amp;#34;&lt;/span> text,&lt;span style="color:#e6db74">&amp;#34;AE39&amp;#34;&lt;/span> text); 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="accessing-records-key-and-values">Accessing record&amp;rsquo;s key and values&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> offer_id, rev, bf.&lt;span style="color:#66d9ef">key&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> business_field, bf.value &lt;span style="color:#66d9ef">as&lt;/span> business_field_comments &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#66d9ef">table_name&lt;/span> tn, jsonb_each_text((tn.answer_data&lt;span style="color:#f92672">-&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#e6db74">&amp;#39;FI5&amp;#39;&lt;/span>)::jsonb) &lt;span style="color:#66d9ef">as&lt;/span> bf;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="json-string-agg">JSON String agg&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- Data is stored as text within a json. Data itself is of type json
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- The end output is comma separted string from json keys
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">select&lt;/span> string_agg(bf, e&lt;span style="color:#e6db74">&amp;#39;, &amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">from&lt;/span> fact_logbook_ae fla, json_object_keys((fla.answer_data&lt;span style="color:#f92672">-&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#e6db74">&amp;#39;AE54&amp;#39;&lt;/span>)::json) bf &lt;span style="color:#66d9ef">where&lt;/span> offer_id&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;SECD-20230013&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="upserts-update-record-on-conflict-while-inserting">UPSERTS: Update record on conflict while inserting&lt;/h2>
&lt;p>Syntax:&lt;/p></description></item></channel></rss>