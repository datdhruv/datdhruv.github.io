<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Why SSH port Forwarding gives you superpowers</title>
<meta name=description content="Port Forwarding allows you to make a port on a computer behave like it is part of some other computer, and trust me it can give you Superpowers"><meta name=keywords content='blog,datDhruv,datdhruv,typdef,ssh'><meta property="og:url" content="http://typdef.com/posts/ssh/ssh-port-forwarding/"><meta property="og:type" content="website"><meta property="og:title" content="Why SSH port Forwarding gives you superpowers"><meta property="og:description" content="Port Forwarding allows you to make a port on a computer behave like it is part of some other computer, and trust me it can give you Superpowers"><meta property="og:image" content="http://typdef.com/"><meta property="og:image:secure_url" content="http://typdef.com/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Why SSH port Forwarding gives you superpowers"><meta name=twitter:description content="Port Forwarding allows you to make a port on a computer behave like it is part of some other computer, and trust me it can give you Superpowers"><meta property="twitter:domain" content="http://typdef.com/posts/ssh/ssh-port-forwarding/"><meta property="twitter:url" content="http://typdef.com/posts/ssh/ssh-port-forwarding/"><meta name=twitter:image content="http://typdef.com/"><link rel=canonical href=http://typdef.com/posts/ssh/ssh-port-forwarding/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.224c8e70fed292d18d7d9ae1b36797c99144e0be1117e2ea2c428379c8496551.js integrity="sha256-IkyOcP7SktGNfZrhs2eXyZFE4L4RF+LqLEKDechJZVE="></script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=nav-title><a class=nav-brand href=http://typdef.com/>Dhruv's Blog</a></div><div class=nav-links><div class=nav-link><a href=http://typdef.com/posts/><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=http://typdef.com/tags/><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/datdhruv target=_blank><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://typdef.com/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=http://typdef.com/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/datdhruv target=_blank><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Why SSH port Forwarding gives you superpowers</h1><small role=doc-subtitle>Port Forwarding allows you to make a port on a computer behave like it is part of some other computer, and trust me it can give you Superpowers</small><p class=post-date>May 19, 2021</p><ul class=post-tags><li class=post-tag><a href=http://typdef.com/tags/ssh>ssh</a></li></ul></div><div class=post-content><p><h2 id=what-is-port-forwarding><strong>What is Port Forwarding?</strong></h2><p>Port Forwarding allows you to make a port on a computer behave like it is part of some other computer.</p><p>Say you are running a website on a computer A, on <code>localhost:8080</code>, you can forward this port to another computer B and then any connection to <code>computer-B:8080</code> will be <strong>tunneled</strong> back to computer A.</p><p>This was an example of local port forwarding.</p><p>You can go the other way round as well, having a website run on <code>computer-B:8080</code> and tunnel it to the Computer A. This is called remote port forwarding.</p><h2 id=a-little-more-explanation>A little more Explanation</h2><p>Let us consider the &ldquo;tunnel&rdquo;.</p><p>The tunnel has a start and an end and the traffic is tunneled from start to end.</p><p>When the tunnel ends at our local Machine host, it&rsquo;s called a local port forward (Tunnel ends at Local port) whereas when the tunnel starts at local port & ends at the remote port it&rsquo;s called remote port forwarding</p><hr><p>The first IP is for specifying access.</p><p>Who has access? <code>localhost</code> or anyone on the network?</p><p>While in local port forwarding, you can have a setup wherein only you, on your own machine can access this website. There can be another arrangement wherein you can allow others on your network to access the tunnel/local port forward. In this situation they will access it via <code>yourip:forward-binded-port</code></p><p>Same for remote. If an ip is specified then only access to remote tunnel. No other ip on the network can access this IP address.</p><hr><p>When you use the -L flag, you can <strong>bind</strong> the remote port to the local port and listen to incoming connections on that port</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-L <span style=color:#f92672>[</span>bind_address:<span style=color:#f92672>]</span>port:host:hostport
</span></span><span style=display:flex><span>-L <span style=color:#f92672>[</span>bind_address:<span style=color:#f92672>]</span>port:remote_socket
</span></span><span style=display:flex><span>-L local_socket:host:hostport
</span></span><span style=display:flex><span>-L local_socket:remote_socket
</span></span></code></pre></div><p>Specifies that connections to the given TCP port or Unix socket on the local (client) host are to be forwarded to the given host and port, or Unix socket, on the remote side. <strong>This works by allocating a socket to listen to either a TCP port on the local side, optionally bound to the specified bind_address, or to a Unix socket.</strong> Whenever a connection is made to the local port or socket, the connection is forwarded over the secure channel, and a connection is made to either host port hostport, or the Unix socket remote_socket, from the remote machine.</p><p>Port forwardings can also be specified in the configuration file. Only the superuser can forward privileged ports. IPv6 addresses can be specified by enclosing the address in square brackets.</p><p>By default, the local port is bound in accordance with the GatewayPorts setting. However, an explicit bind_address may be used to bind the connection to a specific address. The bind_address of <code>localhost</code> indicates that the listening port be bound for local use only, while an empty address or <code>*</code> indicates that the port should be available from all interfaces.</p><p>If remote port forwarding does not work, it is most likely because GatewayPorts is set to no in the sshd_config file.</p><p>Remember, in local port forwarding, A request to my computer&rsquo;s port is <em>forwarded</em> to a remote computer&rsquo;s port and in remote port forwarding, requests to a remote computer&rsquo;s port are <em>forwarded</em> to my computer&rsquo;s port.</p><p>This means that the meaning of host varies depending upon if the the port forwarding is local or remote. In local port forwarding, the host is the ssh-server. Whereas in remote port forwarding the host is the ssh-client (host is the one which <em>hosts something on a port</em>)</p><p><strong>NOTE</strong>: Sometimes you need to explicitly mention 127.0.0.1/localhost (I have experienced this on windows).</p><hr><h3 id=the-vpn-functionality>The VPN functionality</h3><p><strong>This superpower can be used to tunnel connections to various sites that are not accessible to your local computer!!</strong> These might be databases or protected webservers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># The folloiwing tunnel/forward any network traffic origination from your local computer</span>
</span></span><span style=display:flex><span><span style=color:#75715e># to the super secret website&#39;s port 5432</span>
</span></span><span style=display:flex><span>ssh -L 127.0.0.1:5000:someSuperSecretSecretWebsite.com:5432 user@machine
</span></span></code></pre></div><hr><p>You can further forward ports through jump servers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh -L local_socket:host:hostport user@machine1 ssh -L local_socket:host:hostport user@machine2
</span></span></code></pre></div><hr><h2 id=forwarding-with-an-already-established-ssh-connection>Forwarding with an already established ssh connection</h2><p>Note: <code>~</code> is the escape sequence for ssh by default. If it doesnt work immediately, you may need to press enter once and the try entering <code>~</code></p><p><code>~ C</code> Brings up a (local) ssh shell, wherein you can then ask for port forwarding the same way we did earlier.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-L <span style=color:#f92672>[</span>bind_address:<span style=color:#f92672>]</span>port:host:hostport
</span></span><span style=display:flex><span>-R <span style=color:#f92672>[</span>bind_address:<span style=color:#f92672>]</span>port:host:hostport
</span></span></code></pre></div><h2 id=further-you-can-stop-the-port-forwarding>Further you can stop the port forwarding</h2><p>Enter the ssh command mode, then input the forwarding command with a leading <strong>K</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-KL <span style=color:#f92672>[</span>bind_address:<span style=color:#f92672>]</span>port
</span></span><span style=display:flex><span>-KR <span style=color:#f92672>[</span>bind_address:<span style=color:#f92672>]</span>port
</span></span></code></pre></div></p></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" onclick="topFunction()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function topFunction(){smoothScrollToTop()}function smoothScrollToTop(){const e=()=>{const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))};e()}</script></div><aside class=post-toc><nav id=toc><nav id=TableOfContents><ul><li><a href=#what-is-port-forwarding><strong>What is Port Forwarding?</strong></a></li><li><a href=#a-little-more-explanation>A little more Explanation</a><ul><li><a href=#the-vpn-functionality>The VPN functionality</a></li></ul></li><li><a href=#forwarding-with-an-already-established-ssh-connection>Forwarding with an already established ssh connection</a></li><li><a href=#further-you-can-stop-the-port-forwarding>Further you can stop the port forwarding</a></li></ul></nav></nav></aside></main><footer class=footer><span>&copy; 2024 datDhruv</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>